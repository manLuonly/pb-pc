{"source":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-79aa487c\"],{7803:function(e,t,i){\"use strict\";i.r(t);i(\"5ab2\"),i(\"6d57\"),i(\"e10e\");var n=i(\"ce3c\"),r=i(\"8e44\"),o=i(\"f06c\");function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?a(Object(i),!0).forEach(function(t){Object(n.a)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var c={name:\"saveOrEdit\",data:function(){return{ruleForm:{id:0,caseName:\"\",caseContent:\"\",caseRegion:\"\",imgUrl:[]},rules:{caseName:[{required:!0,message:\"案例名称不能为空\"}],caseContent:[{required:!0,message:\"案例文字内容不能为空\"}],caseRegion:[{required:!0,message:\"案例地区不能为空\"}],imgUrl:[{trigger:\"blur\",validator:function(e,t,i){t.length&&t?i():i(new Error(\"请上传图片后提交！\"))}}]},submitLoading:!1,filesMap:{}}},props:{dialogRow:Object,default:function(){}},mounted:function(){if(this.dialogRow.id){var e=this.dialogRow,t=e.caseName,i=e.id,n=e.caseContent,r=e.caseRegion,o=e.caseImgList.map(function(e){return e.imgUrl});Object.assign(this.ruleForm,{id:i,caseName:t,caseContent:n,caseRegion:r,imgUrl:Array.isArray(o)&&o.length?o.join(\",\"):\"\"})}},methods:{cancel:function(){this.$emit(\"update:visible\",!1)},getImgList:function(e){this.ruleForm.imgUrl=e},submitForm:function(){var e=this;this.$refs.form.validate(function(t){if(t){var i=e.ruleForm,n=l(l({},i),{},{imgUrl:Array.isArray(i.imgUrl)?i.imgUrl.join(\",\"):i.imgUrl});e.submitLoading=!0,e.dialogRow.id?Object(r.f)(n).then(function(t){e.$emit(\"refresh\"),e.cancel()}).finally(function(){e.submitLoading=!1}):Object(r.d)(n).then(function(){e.$emit(\"refresh\"),e.cancel()}).finally(function(){e.submitLoading=!1})}})}}},s=i(\"9ca4\");function u(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var m={name:\"add-slide-show\",components:{saveOrEdit:Object(s.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{staticClass:\"save-or-edit\"},[i(\"el-form\",{ref:\"form\",attrs:{model:e.ruleForm,rules:e.rules,\"label-width\":\"110px\"}},[i(\"el-form-item\",{attrs:{label:\"案例名称\",prop:\"caseName\"}},[i(\"el-input\",{model:{value:e.ruleForm.caseName,callback:function(t){e.$set(e.ruleForm,\"caseName\",t)},expression:\"ruleForm.caseName\"}})],1),i(\"el-form-item\",{attrs:{label:\"案例文字内容\",prop:\"caseContent\"}},[i(\"el-input\",{model:{value:e.ruleForm.caseContent,callback:function(t){e.$set(e.ruleForm,\"caseContent\",t)},expression:\"ruleForm.caseContent\"}})],1),i(\"el-form-item\",{attrs:{label:\"案例地区\",prop:\"caseRegion\"}},[i(\"el-input\",{model:{value:e.ruleForm.caseRegion,callback:function(t){e.$set(e.ruleForm,\"caseRegion\",t)},expression:\"ruleForm.caseRegion\"}})],1),i(\"el-form-item\",{attrs:{label:\"案例图\",prop:\"imgUrl\"}},[i(\"uploadImageList\",{attrs:{limit:4,value:e.ruleForm.imgUrl},on:{input:e.getImgList}})],1)],1),i(\"div\",{staticClass:\"z-flex z-row-right\"},[i(\"el-button\",{attrs:{plain:\"\"},on:{click:e.cancel}},[e._v(\"取消\")]),i(\"el-button\",{attrs:{type:\"primary\",loading:e.submitLoading},on:{click:e.submitForm}},[e._v(\"提交\")])],1)],1)},[],!1,null,null,null).exports},data:function(){return{tableLoading:!1,tableData:[],dialog:{title:\"\",visible:!1,dialogRow:{}}}},created:function(){this.getSilde()},methods:{getSilde:function(){var e=this;this.tableLoading=!0,Object(r.m)().then(function(t){e.tableData=t}).finally(function(){e.tableLoading=!1})},deleteSlide:function(e){var t=this;Object(o.a)(r.e,{id:e}).then(function(){t.getSilde()})},saveOrEdit:function(e,t){this.dialog.dialogRow=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?u(Object(i),!0).forEach(function(t){Object(n.a)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},e),this.dialog.title=t,this.dialog.visible=!0},handleCaseImgList:function(e){return e.caseImgList.map(function(e){return e.imgUrl})}}},d=Object(s.a)(m,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"el-card\",[i(\"el-button\",{attrs:{slot:\"header\",type:\"primary\"},on:{click:function(t){return e.saveOrEdit({},\"新增\")}},slot:\"header\"},[e._v(\"新增\")]),i(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.tableLoading,expression:\"tableLoading\"}],staticStyle:{width:\"100%\"},attrs:{data:e.tableData,height:e.$utils.getTableHeight(1)}},[i(\"el-table-column\",{attrs:{width:\"50\",label:\"序号\",type:\"index\",align:\"center\"}}),i(\"el-table-column\",{attrs:{prop:\"caseName\",label:\"名称\",align:\"center\",\"show-overflow-tooltip\":\"\"}}),i(\"el-table-column\",{attrs:{prop:\"caseContent\",label:\"文字内容\",align:\"center\",\"show-overflow-tooltip\":\"\"}}),i(\"el-table-column\",{attrs:{prop:\"caseRegion\",label:\"地区\",align:\"center\"}}),i(\"el-table-column\",{attrs:{label:\"案例图片\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[i(\"loadingImage\",{staticStyle:{width:\"100px\",height:\"50px\"},attrs:{src:t.row.caseImgList[0]?t.row.caseImgList[0].imgUrl:\"\",srcList:e.handleCaseImgList(t.row)}})]}}])}),i(\"el-table-column\",{attrs:{label:\"操作\",align:\"center\",width:\"140\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[i(\"el-button-group\",[i(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(i){return e.saveOrEdit(t.row,\"编辑\")}}},[e._v(\"编辑\")]),i(\"el-button\",{attrs:{type:\"danger\"},on:{click:function(i){return e.deleteSlide(t.row.id)}}},[e._v(\"删除\")])],1)]}}])})],1),i(\"el-dialog\",{attrs:{visible:e.dialog.visible,title:e.dialog.title,\"close-on-click-modal\":!1,width:\"700px\",top:\"50px\"},on:{\"update:visible\":function(t){return e.$set(e.dialog,\"visible\",t)}}},[i(\"div\",{staticStyle:{margin:\"-10px 0 -10px\"}},[e.dialog.visible?i(\"save-or-edit\",{attrs:{visible:e.dialog.visible,dialogRow:e.dialog.dialogRow},on:{\"update:visible\":function(t){return e.$set(e.dialog,\"visible\",t)},refresh:e.getSilde}}):e._e()],1)])],1)},[],!1,null,null,null);t.default=d.exports},f06c:function(e,t,i){\"use strict\";var n=i(\"a593\");t.a=function(e,t){return n.default.prototype.$msgbox({title:\"确认信息\",message:\"是否确认删除？\",showCancelButton:!0,confirmButtonText:\"删除\",type:\"warning\",cancelButtonText:\"取消\",beforeClose:function(i,n,r){\"confirm\"===i?(n.confirmButtonLoading=!0,n.confirmButtonText=\"删除中...\",e(t).then(function(){r()}).catch(function(){n.confirmButtonText=\"删除\"}).finally(function(){n.confirmButtonLoading=!1})):r()}})}}}]);"}