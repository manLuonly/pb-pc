{"source":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-ffda6e02\"],{c65c:function(t,e,n){\"use strict\";n.r(e);n(\"5ab2\"),n(\"6d57\"),n(\"e10e\");var r=n(\"ce3c\"),i=n(\"8e44\"),o=n(\"f06c\");function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach(function(e){Object(r.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var c={name:\"company-dialog\",data:function(){return{ruleForm:{comName:\"\",comContent:\"\",imgUrl:\"\"},rules:{comName:[{required:!0,message:\"不能为空\"}],comContent:[{required:!0,message:\"不能为空\"}],imgUrl:[{trigger:\"blur\",validator:function(t,e,n){e.length&&e?n():n(new Error(\"请上传图片后提交！\"))}}]},submitLoading:!1}},props:{dialogRow:Object,default:function(){}},mounted:function(){if(this.dialogRow.id){var t=this.dialogRow,e=t.id,n=t.comName,r=t.comContent,i=t.imgList.map(function(t){return t.imgUrl});Object.assign(this.ruleForm,{id:e,comName:n,comContent:r,imgUrl:Array.isArray(i)&&i.length?i.join(\",\"):\"\"})}},methods:{cancel:function(){this.$emit(\"update:visible\",!1)},getImgList:function(t){this.ruleForm.imgUrl=t},submitForm:function(){var t=this;this.$refs.form.validate(function(e){if(e){t.submitLoading=!0;var n=t.ruleForm,r=l(l({},n),{},{imgUrl:Array.isArray(n.imgUrl)?n.imgUrl.join(\",\"):n.imgUrl});t.dialogRow.id?Object(i.F)(r).then(function(){t.$emit(\"refresh\"),t.cancel()}).finally(function(){t.submitLoading=!1}):Object(i.a)(r).then(function(){t.$emit(\"refresh\"),t.cancel()}).finally(function(){t.submitLoading=!1})}})}}},s=n(\"9ca4\");function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}var m={name:\"about-company\",data:function(){return{tableLoading:!1,tableData:[],dialog:{title:\"\",visible:!1,dialogRow:{}},srcList:[]}},components:{companyDialog:Object(s.a)(c,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"save-or-edit\"},[n(\"el-form\",{ref:\"form\",attrs:{model:t.ruleForm,rules:t.rules,\"label-width\":\"100px\"}},[n(\"el-form-item\",{attrs:{label:\"公司名称\",prop:\"comName\"}},[n(\"el-input\",{model:{value:t.ruleForm.comName,callback:function(e){t.$set(t.ruleForm,\"comName\",e)},expression:\"ruleForm.comName\"}})],1),n(\"el-form-item\",{attrs:{label:\"公司简介\",prop:\"comContent\"}},[n(\"el-input\",{attrs:{type:\"textarea\"},model:{value:t.ruleForm.comContent,callback:function(e){t.$set(t.ruleForm,\"comContent\",e)},expression:\"ruleForm.comContent\"}})],1),n(\"el-form-item\",{attrs:{label:\"轮播图\",prop:\"name\"}},[n(\"uploadImageList\",{attrs:{limit:4,value:t.ruleForm.imgUrl},on:{input:t.getImgList}})],1)],1),n(\"div\",{staticClass:\"z-flex z-row-right\"},[n(\"el-button\",{attrs:{plain:\"\"},on:{click:t.cancel}},[t._v(\"取消\")]),n(\"el-button\",{attrs:{type:\"primary\",loading:t.submitLoading},on:{click:t.submitForm}},[t._v(\"提交\")])],1)],1)},[],!1,null,null,null).exports},mounted:function(){this.getDataList()},methods:{getDataList:function(){var t=this;Object(i.k)().then(function(e){t.tableData=e||[]})},saveOrEdit:function(t,e){this.dialog.dialogRow=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach(function(e){Object(r.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},t),this.dialog.title=e,this.dialog.visible=!0},deleteCompany:function(t){var e=this;Object(o.a)(i.l,{id:t}).then(function(){e.getDataList()})},getImgUrl:function(t){return t.imgList.map(function(t){return t.imgUrl})}}},g=Object(s.a)(m,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"el-card\",[n(\"el-button\",{attrs:{slot:\"header\",type:\"primary\"},on:{click:function(e){return t.saveOrEdit({},\"新增\")}},slot:\"header\"},[t._v(\"新增\")]),n(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.tableLoading,expression:\"tableLoading\"}],staticStyle:{width:\"100%\"},attrs:{data:t.tableData,height:t.$utils.getTableHeight(1)}},[n(\"el-table-column\",{attrs:{width:\"50\",label:\"序号\",type:\"index\",align:\"center\"}}),n(\"el-table-column\",{attrs:{prop:\"comName\",label:\"公司名称\",align:\"center\"}}),n(\"el-table-column\",{attrs:{prop:\"comContent\",label:\"公司简介\",align:\"center\"}}),n(\"el-table-column\",{attrs:{prop:\"imageUrl\",label:\"图片路径\",align:\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[n(\"loadingImage\",{staticStyle:{width:\"100px\",height:\"50px\",cursor:\"pointer\"},attrs:{src:e.row.imgList[0]?e.row.imgList[0].imgUrl:\"\",srcList:t.getImgUrl(e.row)}})]}}])}),n(\"el-table-column\",{attrs:{label:\"操作\",align:\"center\",width:\"140\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[n(\"el-button-group\",[n(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(n){return t.saveOrEdit(e.row,\"编辑\")}}},[t._v(\"编辑\")]),n(\"el-button\",{attrs:{type:\"danger\"},on:{click:function(n){return t.deleteCompany(e.row.id)}}},[t._v(\"删除\")])],1)]}}])})],1),n(\"el-dialog\",{attrs:{visible:t.dialog.visible,title:t.dialog.title,\"close-on-click-modal\":!1,top:\"50px\"},on:{\"update:visible\":function(e){return t.$set(t.dialog,\"visible\",e)}}},[n(\"div\",{staticStyle:{margin:\"-10px 0 -10px\"}},[t.dialog.visible?n(\"company-dialog\",{attrs:{visible:t.dialog.visible,dialogRow:t.dialog.dialogRow},on:{\"update:visible\":function(e){return t.$set(t.dialog,\"visible\",e)},refresh:t.getDataList}}):t._e()],1)])],1)},[],!1,null,\"ce3b06cc\",null);e.default=g.exports},f06c:function(t,e,n){\"use strict\";var r=n(\"a593\");e.a=function(t,e){return r.default.prototype.$msgbox({title:\"确认信息\",message:\"是否确认删除？\",showCancelButton:!0,confirmButtonText:\"删除\",type:\"warning\",cancelButtonText:\"取消\",beforeClose:function(n,r,i){\"confirm\"===n?(r.confirmButtonLoading=!0,r.confirmButtonText=\"删除中...\",t(e).then(function(){i()}).catch(function(){r.confirmButtonText=\"删除\"}).finally(function(){r.confirmButtonLoading=!1})):i()}})}}}]);"}